<div class="row justify-content-center">
    <div class="col-md-8">
      <div class="jumbotron pad">
        <h2>Empleados</h2>
        <div class="form-group">
          <button class="btn btn-primary" data-toggle="modal" data-target="#newEmpleado">Nuevo Empleado</button>
        </div>
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>#</th>
                <th>Dni</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Nacimiento</th>
                <th>Puesto</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let empleado of empleados; let i = index">
                <td>{{ i + 1 }}</td>
                <td>{{empleado.dni}}</td>
                <td>{{empleado.nombre}}</td>
                <td>{{empleado.apellido}}</td>
                <td>{{empleado.fechaNac | date:"dd-MM-yyyy"}}</td>
                <td>{{empleado.puesto.nombre}}</td>
                <td class="text-right">
                  <button class="btn btn-success btn-sm mr-2"><i class="fa fa-search"></i></button>
                  <button class="btn btn-warning btn-sm mr-2" (click)="openModalUpdate(empleado)"><i class="fa fa-edit"></i></button>
                  <button class="btn btn-danger btn-sm" (click)="openModalDelete(empleado)"><i class="fa fa-trash"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal New Empleado -->
<div class="modal fade" id="newEmpleado" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Nuevo Empleado</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form #formEmpleado="ngForm" (submit)="addEmpleado(formEmpleado)">
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-4">
            <label>Dni</label>
            <input type="number" class="form-control" name="dni" [(ngModel)]="empleado.dni">
          </div>
          <div class="form-group col-md-4">
            <label>Nombre</label>
            <input type="text" class="form-control" name="nombre" [(ngModel)]="empleado.nombre">
          </div>
          <div class="form-group col-md-4">
            <label>Apellido</label>
            <input type="text" class="form-control" name="apellido" [(ngModel)]="empleado.apellido">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-4">
            <label>Nacimiento</label>
            <input type="date" class="form-control" name="nacimiento" [(ngModel)]="empleado.fechaNac">
          </div>
          <div class="form-group col-md-4">
            <label>Email</label>
            <input type="email" class="form-control" name="email" [(ngModel)]="empleado.email">
          </div>
          <div class="form-group col-md-4">
            <label>Puesto</label>
            <select class="form-control" name="puesto" [(ngModel)]="empleado.idPuesto">
              <option *ngFor="let puesto of puestos" [value]="puesto.puestoID">{{puesto.nombre}}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="formEmpleado.reset()">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar</button>
      </div>
    </form>
    </div>
  </div>
</div>

<!-- Modal Delete emplado -->
<div class="modal fade" id="deleteEmpleado" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Eliminar Empleado</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        Â¿Estas segur que deseas eliminar a <strong>{{empleado.nombre}} {{empleado.apellido}}</strong>?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cargarEmpleados(); this.empleado = {}">Cancelar</button>
        <button type="button" class="btn btn-primary" (click)="deleteEmpleado()">Aceptar</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Update Empleado -->
<div class="modal fade" id="updateEmpleado" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true" data-backdrop="static">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Nuevo Empleado</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <form #formEmpleado="ngForm" (submit)="updateEmpleado(formEmpleado)">
      <div class="modal-body">
        <div class="form-row">
          <div class="form-group col-md-4">
            <label>Dni</label>
            <input type="number" class="form-control" name="dni" [(ngModel)]="empleado.dni">
          </div>
          <div class="form-group col-md-4">
            <label>Nombre</label>
            <input type="text" class="form-control" name="nombre" [(ngModel)]="empleado.nombre">
          </div>
          <div class="form-group col-md-4">
            <label>Apellido</label>
            <input type="text" class="form-control" name="apellido" [(ngModel)]="empleado.apellido">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group col-md-4">
            <label>Nacimiento</label>
            <input type="date" class="form-control" name="nacimiento" [(ngModel)]="empleado.fechaNac">
          </div>
          <div class="form-group col-md-4">
            <label>Email</label>
            <input type="email" class="form-control" name="email" [(ngModel)]="empleado.email">
          </div>
          <div class="form-group col-md-4">
            <label>Puesto</label>
            <select class="form-control" name="puesto" [(ngModel)]="empleado.idPuesto" >
              <option *ngFor="let puesto of puestos" [value]="puesto.puestoID">{{puesto.nombre}}</option>
            </select>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" (click)="cargarEmpleados(); this.empleado = {};">Cancelar</button>
        <button type="submit" class="btn btn-primary">Guardar</button>
      </div>
    </form>
    </div>
  </div>
</div>

